---
title: "GAS + GraphQLã§GitHubã®ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’Slackã«é€šçŸ¥ã™ã‚‹"
date: "2018-09-25T00:07:06.000Z"
updatedAt: "2020-06-03T14:29:02.000Z"
template: "post"
draft: false
slug: "/posts/google-apps-script-with-git-hub-api-graphql"
category: "Google Apps Script"
tags:
    - "Google Apps Script"
    - "GraphQL"
description: "GitHubãŒGraphQLã®APIã‚’å…¬é–‹ã—ã¦ã„ã‚‹ã®ã§ã€ãƒ¬ãƒã‚¸ãƒˆãƒªã®ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’å–å¾—ã—ã¦Slackã«é€šçŸ¥ã™ã‚‹ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’æ›¸ãã¾ã—ãŸã€‚"
socialImage: ""
---

![Slackã®é€šçŸ¥ç”»é¢](/media/2018/9/25__0.png)

## ã¯ã˜ã‚ã«
æ–°ã—ã„æŠ€è¡“ã‚’èº«ã«ã¤ã‘ã‚‹ãŸã‚ã«ã¯ã€å®Ÿéš›ã«ä½¿ã†ã“ã¨ãŒä¸€ç•ªã§ã™ã€‚

æœ€è¿‘æµè¡Œã‚Šã®GraphQLã‚’å­¦ã¶ãŸã‚ã«ã€å®Ÿéš›ã«ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã„ã¦ã¿ã¾ã—ãŸã€‚

ã¤ã„ã§ã«å¾—æ„ãªSlacké€£æºã§ã€Githubã®ãƒ¬ãƒã‚¸ãƒˆãƒªã®ãƒ–ãƒ©ãƒ³ãƒã”ã¨ã®ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’ç¿’æ…£ã§é›†è¨ˆã™ã‚‹ChatOpsåŒ–ã—ã¾ã™ã€‚

ãã®é€±ã«ã‚³ãƒŸãƒƒãƒˆãŒã‚ã£ãŸå…¨ã¦ã®ãƒ–ãƒ©ãƒ³ãƒã‚’å–å¾—ã§ãã‚‹ã®ã§ã€ã€ŒçŸ¥ã‚‰ãªã„é–“ã«æ–°ã—ã„ãƒ–ãƒ©ãƒ³ãƒãŒåˆ‡ã‚‰ã‚Œã¦ã„ã‚‹ã€ã“ã¨ã‚„ã€ã€Œmasterãƒ–ãƒ©ãƒ³ãƒã¸ã®ãƒãƒ¼ã‚¸å¿˜ã‚Œã€ã‚’ç™ºè¦‹ã§ãã‚‹ãªã©ã€æ€ã£ãŸä»¥ä¸Šã«å½¹ã«ç«‹ã¡ã¾ã—ãŸã€‚

## Slackã«é€£æºã—ãŸçŠ¶æ…‹

Githubã®ãƒã‚¹ã‚³ãƒƒãƒˆOctocatãŒæ¯é€±ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’æ•™ãˆã¦ãã‚Œã‚‹å½¢ã«ã—ã¾ã—ãŸã€‚

## æº–å‚™ã™ã‚‹ã‚‚ã®
- Githubã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Googleã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Slackã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹

## æ‰‹é †
å¤§ã¾ã‹ãªæ‰‹é †ã‚’åˆ—æŒ™ã—ã¾ã™ã€‚

1. GraphQLã®ã‚¯ã‚¨ãƒªã‚’æ›¸ã

- [GASã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰](https://script.google.com/home)ã‹ã‚‰ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆã™ã‚‹
- GASã®ã‚³ãƒ¼ãƒ‰ã‚’æ›¸ã
- ãƒˆãƒªã‚¬ãƒ¼ã‚’è¨­å®šã—ã€é€ä¿¡æ™‚é–“ã‚’æ±ºã‚ã‚‹

## GraphQLã®ã‚¯ã‚¨ãƒªã¨è¿”å´ã•ã‚Œã‚‹JSON

```graphql
query{
  repo_name: repository(owner: "owner_name", name: "repo_name") {
    ...RepoFragment
  }
}

fragment RepoFragment on Repository {
  refs(first: 100, refPrefix:"refs/heads/") {
    edges {
      node {
        name
      }
    }
    nodes {
        target {
      ... on Commit {
        history(first: 0, since: "2018-08-01T09:00:00.000+09:00\"  ) {
          totalCount
        }
       }
     }
   }
 }
}
```

`repo_name`ã¯ãƒ¬ãƒã‚¸ãƒˆãƒªã®åå‰ã€`owner_name`ã¯ãƒ¬ãƒã‚¸ãƒˆãƒªã®æ‰€æœ‰è€…ã‚’å…¥ã‚Œã¦ãã ã•ã„ã€‚

ã¾ãŸã€`histroy`é …ç›®å†…ã®`since`ã¯GASã§ãƒˆãƒªã‚¬ãƒ¼ã®ï¼‘é€±é–“å‰ã®æ—¥ä»˜ãŒå…¥ã‚‹ã‚ˆã†ã«èª¿ç¯€ã—ã¾ã™ã€‚

å®Ÿéš›ã«ãƒ†ã‚¹ãƒˆã—ã¦ã¿ãŸã„æ–¹ã¯ä¸Šè¨˜é …ç›®ã‚’å¤‰æ›´ã—ãŸå¾Œã€Github Developerã®[GraphQL API Explorer](https://developer.github.com/v4/explorer/)ã§ä¸Šè¨˜ã‚¯ã‚¨ãƒªã‚’å®Ÿè¡Œã—ã¦ã¿ã¦ãã ã•ã„ã€‚

Githubã‹ã‚‰ä¸‹è¨˜ã®ã‚ˆã†ãªJSONãŒè¿”å´ã•ã‚Œã¾ã™ã€‚

```json
{
  "data": {
    "emma": {
      "refs": {
        "edges": [
          {
            "node": {
              "name": "PHP_UNIT"
            }
          },
          {
            "node": {
              "name": "develop"
            }
          },
          {
            "node": {
              "name": "feature/SAMPLE_PROJECT"
            }
          },
          {
            "node": {
              "name": "master"
            }
          },
          {
            "node": {
              "name": "release_0820"
            }
          }
        ],
        "nodes": [
          {
            "target": {
              "history": {
                "totalCount": 8
              }
            }
          },
          {
            "target": {
              "history": {
                "totalCount": 44
              }
            }
          },
          {
            "target": {
              "history": {
                "totalCount": 19
              }
            }
          },
          {
            "target": {
              "history": {
                "totalCount": 2
              }
            }
          },
          {
            "target": {
              "history": {
                "totalCount": 11
              }
            }
          }
        ]
      }
    }
  }
}
```

nodeã®name:"ãƒ–ãƒ©ãƒ³ãƒå"ã¨targetã®totalCount:"æ•°å­—"ãŒé †ç•ªã«å¯¾å¿œã—ã¦ã„ã¾ã™ã€‚

ã“ã‚Œã‚’æ•´ç†ã™ã‚‹ã¨ã€2018-08-01ä»¥é™ã€2018-08-24 22:00ï¼ˆã‚¯ã‚¨ãƒªã‚’é£›ã°ã—ãŸæ™‚ç‚¹ï¼‰ã®ã‚³ãƒŸãƒƒãƒˆæ•°ãŒã‚ã‹ã‚Šã¾ã™ã€‚

|ãƒ–ãƒ©ãƒ³ãƒå|ã‚³ãƒŸãƒƒãƒˆæ•°|
|:--|:--|
| PHP_UNIT | 8 |
| develop  | 44 |
| feature/SAMPLE_PROJECT | 19 |
| master  | 2 |
| release_0820  | 11 |

ãƒ–ãƒ©ãƒ³ãƒã®ãƒãƒ¼ã‚¸å…ˆã®ã‚³ãƒŸãƒƒãƒˆæ•°ã¯ã€ãã®é€±ã«ãƒãƒ¼ã‚¸ã•ã‚ŒãŸãƒ–ãƒ©ãƒ³ãƒã®ã‚³ãƒŸãƒƒãƒˆæ•°ãŒåŠ ç®—ã•ã¾ã™ã€‚ãªã®ã§ã€developãƒ–ãƒ©ãƒ³ãƒã¯ã‚³ãƒŸãƒƒãƒˆæ•°ãŒå¤šããªã‚ŠãŒã¡ã§ã™ã€‚

## ã‚³ãƒ¼ãƒ‰å…¨ä½“ã®ç´¹ä»‹
repositoryã®owneråã‚’panda_programã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåã‚’gasã¨ã—ã¾ã™ã€‚

```js
function createMessage() {
  // Githubã®APIã‚’å©ã
  const json  = fetchCommitTotal();
  const repos = [json.data.gas];
  const branch = {
    "gas" : repos[0].refs.edges
  };
  const total = {
    "gas" : repos[0].refs.nodes
  };

  // JSONã‚’æ•´å½¢ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®ãƒ–ãƒ©ãƒ³ãƒã¨ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’å–å¾—
  const gas = prepareInfo(branch.gas, total.gas);
  const projectName = ['Gas'];
  const project     = [gas];

  const today         = formatDate(0);
  const oneWeekBefore = formatDate(-7);
  const time = new Date();
  const hour = time.getHours();
  const triggerTime = hour + ':00:00';

  // ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä½œæˆ
  var message = 'ä»Šé€±ã‚‚ãŠç–²ã‚Œæ§˜ã§ã—ãŸğŸ˜Š\n';
  message += 'ä»Šé€±ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’é›†è¨ˆã—ã¾ã—ãŸã€‚\n';
  message += '(é›†è¨ˆæœŸé–“ ' + oneWeekBefore + ' ' + triggerTime + ' ~ ' + today + ' ' + triggerTime + ')\n\n';

  for (i = 0, len = project.length; i < len; ++i) {
    message += 'ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼š *' + projectName[i];
    message += '* \n ```' + project[i] + '```\n\n';
  }

  // Slackã«é€ã‚‹
  const to = PropertiesService.getScriptProperties().getProperty("TO");
  sendToSlack(message, to);
}

function prepareInfo(branch, total) {
  const branchName  = [];
  const commitTotal = [];
  const data        = [];

  for (var i = 0, len = branch.length; i < len; ++i) {
    // ã‚³ãƒŸãƒƒãƒˆæ•°ãŒ0ã®ãƒ–ãƒ©ãƒ³ãƒã‚’é™¤å¤–
    if(parseInt(total[i].target.history.totalCount) === 0) {
      continue;
    }

    // é…åˆ—ã«ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ ¼ç´
    data.push({
      "branchName"  : branch[i].node.name,
      "commitTotal" : total[i].target.history.totalCount
    });
  }

  var info = '';
  var sum = 0;

  for (var i = 0, len = data.length; i < len; ++i) {
    info += data[i].branchName + ' ã®ã‚³ãƒŸãƒƒãƒˆæ•°ã¯ ' + data[i].commitTotal + 'ä»¶' + '\n';
    sum += data[i].commitTotal;
  }

  info += 'åˆè¨ˆ' + sum + 'ä»¶ã§ã™ã€‚';

  return info;
}

function fetchCommitTotal() {
  const url   = 'https://api.github.com/graphql';
  const token = PropertiesService.getScriptProperties().getProperty("TOKEN");
  const oneWeekBefore = formatDate(-7);

  const graphql = ' \
{ \
  gas: repository(owner: "panda_program", name: "gas") {\
    ...RepoFragment\
  }\
}\
fragment RepoFragment on Repository {\
  refs(first: 100, refPrefix:"refs/heads/") {\
    edges {\
      node {\
        name\
      }\
    }\
    nodes {\
        target {\
      ... on Commit {\
        history(first: 0, since: "'
         + oneWeekBefore +
        'T09:00:00.000+09:00\"  ) {\
          totalCount\
        }\
       }\
     }\
   }\
 }\
}\
';

  const options = {
    'method' : 'post',
    'contentType' : 'application/json',
    'headers' : {
      'Authorization' : 'Bearer ' +  token
     },
    'payload' : JSON.stringify({ query : graphql })
  };

  const response = UrlFetchApp.fetch(url, options);
  const json     = JSON.parse(response.getContentText());

  return json;
}

/** æ—¥ä»˜ã‚’ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã™ã‚‹
 *  @param  {int} days
 */ @return {string} YYYY-MM-DD
function formatDate(days) {
  const now = new Date;
  const oneWeekBefore = new Date(now.getFullYear(), now.getMonth(), now.getDate() + days);
  const year    = oneWeekBefore.getFullYear();
  const month   = ('0' + (oneWeekBefore.getMonth() + 1)).slice(-2);
  const date    = ('0' + oneWeekBefore.getDate()).slice(-2);
  const format  = year+ '-' + month + '-' + date;

  return format;
}

function sendToSlack(body, channel) {
  const url = PropertiesService.getScriptProperties().getProperty("WEBHOOK_URL");

  // Slackã«é€šçŸ¥ã™ã‚‹éš›ã®åå‰ã€è‰²ã€ç”»åƒã‚’æ±ºå®šã™ã‚‹
  const data = {
    'channel' : channel,
    'username' : 'Octocat',
    'attachments': [{
      'color': '#fc166a',
      'text' : body,
    }],
    'icon_url' : 'https://assets-cdn.github.com/images/modules/logos_page/Octocat.png'
  };

  const payload = JSON.stringify(data);
  const options = {
    'method' : 'POST',
    'contentType' : 'application/json',
    'payload' : payload
  };

  UrlFetchApp.fetch(url, options);
}
```

- `createMessage`ã§Slackã®æœ¬æ–‡ã‚’ä½œæˆã—ã¾ã™ã€‚
- `prepareInfo`ã§GraphQLã‹ã‚‰è¿”å´ã•ã‚ŒãŸJSONã®æ•´å½¢ã—ã¾ã™ã€‚
- `fetchCommitTotal`ã§GraphQLã«ã‚¯ã‚¨ãƒªã‚’é£›ã°ã™ã€‚
- `formatDate`ã§æ—¥ä»˜ã‚’YYYY-MM-DDã®å½¢ã«ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã—ã¾ã™ã€‚
- `sendToSlack`ã§Slackã«é€šçŸ¥ã—ã¾ã™ã€‚

1ã¤ã®é–¢æ•°ã«1ã¤ã®å‹•ä½œã‚’ã•ã›ã‚‹ã“ã¨ã§ã‚³ãƒ¼ãƒ‰ã‚’ã‚·ãƒ³ãƒ—ãƒ«ã«ä¿ã£ã¦ã„ã¾ã™(KISSåŸå‰‡)ã€‚

## ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ãƒˆãƒªã‚¬ãƒ¼ã‚’è¨­å®šã™ã‚‹
### ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¨­å®š
ä¸‹è¨˜ã®æƒ…å ±ã‚’GASã®ã€Œã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã€ã«æ›¸ãè¾¼ã‚€ï¼ˆæ–¹æ³•ã¯[ã€ŒGoogleAppsScriptã€€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®è¶…ç°¡å˜ãªä½¿ã„æ–¹ã€](https://qiita.com/0Delta/items/7d8303eebbff4062069e)ã‚’å‚ç…§ï¼‰ã€‚

|ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£| å€¤ |
|:--|:--|
| Slackã®é€šçŸ¥å…ˆï¼ˆãƒãƒ£ãƒ³ãƒãƒ« or ãƒ¦ãƒ¼ã‚¶ãƒ¼åï¼‰ | TO(*1)  |
| Slackã®Webhook URL | WEBHOOK_URL (*2) |
| Githubã®Personal access tokens | TOKEN (*3) |

*1 ãƒãƒ£ãƒ³ãƒãƒ«ã¯ã€Œ#ãƒãƒ£ãƒ³ãƒãƒ«åã€ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€Œ@ãƒ¦ãƒ¼ã‚¶ãƒ¼åã€
*2 [ã€ŒSlackã®Webhook URLå–å¾—æ‰‹é †ã€](https://qiita.com/vmmhypervisor/items/18c99624a84df8b31008)ã‚’å‚ç…§
*3[ã€ŒGitHubã€ŒPersonal access tokensã€ã®è¨­å®šæ–¹æ³•ã€](https://qiita.com/kz800/items/497ec70bff3e555dacd0)ã‚’å‚ç…§

### ãƒˆãƒªã‚¬ãƒ¼ã®è¨­å®š
[ç·¨é›† > å…¨ã¦ã®ãƒˆãƒªã‚¬ãƒ¼]ã§é–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã‚¿ã‚¤ãƒŸãƒ³ã‚°ã‚’è¨­å®šã—ã¾ã™ã€‚
GASã¯FaaSãªã®ã§ã€é–¢æ•°ã”ã¨ã«å®Ÿè¡Œã‚’é¸æŠã™ã‚‹äº‹ãŒã§ãã¾ã™ã€‚

å®šæœŸå®Ÿè¡Œã™ã‚‹é–¢æ•°ã¯`createMessage`ã€ä¸€é€±é–“ã«ä¸€åº¦ã«é›†è¨ˆã™ã‚‹ãŸã‚é€±ã‚¿ã‚¤ãƒãƒ¼ã‚’é¸æŠã—ã¾ã™ã€‚

![GASã®ãƒˆãƒªã‚¬ãƒ¼è¨­å®šç”»é¢](/media/2018/9/25__1.png)

## è¤‡æ•°ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã®ã‚³ãƒŸãƒƒãƒˆã‚’å–å¾—ã™ã‚‹
ã“ã®ã‚·ã‚¹ãƒ†ãƒ ã¯è¤‡æ•°ãƒ¬ãƒã‚¸ãƒˆãƒªãŒã‚ã‚‹å‰æã§ä½œæˆã—ã¾ã—ãŸã€‚gas, nodejs, javascriptã¨ã„ã†ãƒ¬ãƒã‚¸ãƒˆãƒªã‹ã‚‰ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’å–å¾—ã™ã‚‹ã¨ä»®å®šã—ã¾ã™ã€‚

ãã®å ´åˆã€GraphQLã®ã‚¯ã‚¨ãƒªã¨`createMessage`ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚

### GraphQLã®ã‚¯ã‚¨ãƒªã«ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã™ã‚‹
ä¸‹è¨˜ã®ã‚ˆã†ã«ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

```graphql
{
  gas: repository(owner: "panda_program", name: "gas") {
    ...RepoFragment
  }
  nodejs: repository(owner: "panda_program", name: "nodejs") {
    ...RepoFragment
  }
  javascript: repository(owner: "panda_program", name: "javascript") {
    ...RepoFragment
  }
}
```

### JSONã®æ•´å½¢ç®‡æ‰€ã‚’å¤‰æ›´ã™ã‚‹
`createMessage`ã®ä¸€éƒ¨ã‚’ä¸‹è¨˜ã®ã‚ˆã†ã«æ›¸ãæ›ãˆã¦ãã ã•ã„ã€‚

```js
const json  = fetchCommitTotal();
const repos = [json.data.gas, json.data.nodejs, json.data.javascript];
const branch = {
  "gs" : repos[0].refs.edges,
  "node" : repos[1].refs.edges,
  "js" : repos[2].refs.edges
};
const total = {
  "gs" : repos[0].refs.nodes,
  "node" : repos[1].refs.nodes,
  "js" : repos[2].refs.nodes
};

// JSONã‚’æ•´å½¢ã—ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¯ã®ãƒ–ãƒ©ãƒ³ãƒã¨ã‚³ãƒŸãƒƒãƒˆæ•°ã‚’å–å¾—
const gs = prepareInfo(branch.gs, total.gs);
const node = prepareInfo(branch.node, total.node);
const js = prepareInfo(branch.js, total.js);
const projectName = ['gas', 'nodejs', 'javascript'];
const project     = [gs, node, js];
```

## Slackã®é€šçŸ¥ã®è¡¨ç¤ºæ–¹æ³•ã‚’å¤‰æ›´ã™ã‚‹
`sendToSlack`ã®optionã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§ã€è¡¨ç¤ºåã‚„ã‚¢ã‚¤ã‚³ãƒ³ç”»åƒã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

## å®Ÿè¡Œç’°å¢ƒã¨ã—ã¦Google Apps Scriptã‚’é¸æŠã—ãŸç†ç”±
- GASã¯ãƒ•ã‚¡ãƒ³ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ›¸ãã ã‘ã§åˆ©ç”¨ã§ãã‚‹FaaSï¼ˆã‚µãƒ¼ãƒãƒ¬ã‚¹ï¼‰ã§ã‚ã‚‹ãŸã‚ç®¡ç†ã‚³ã‚¹ãƒˆãŒå°ã•ã„
- ä¼šç¤¾ã§ä½¿ç”¨ã—ã¦ã„ã‚‹Githubã®ãƒˆãƒ¼ã‚¯ãƒ³ã‚’æ²è¼‰ã™ã‚‹ãŸã‚ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®è¦³ç‚¹ã‹ã‚‰å¤–éƒ¨ã‚µãƒ¼ãƒãƒ¼ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç½®ã‹ãšã€ä¼šç¤¾ç”¨Google Driveã«æ ¼ç´ã—ãŸã‹ã£ãŸ
- Slackã¸ã®é€£æºãŒå®¹æ˜“ã ã‹ã‚‰

## å‚™å¿˜
- `const graphql`ã®ç®‡æ‰€ã§`\`ã§æ”¹è¡Œã‚’ã‚¨ã‚¹ã‚±ãƒ¼ãƒ—ã—ãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¾ã™ã€‚ä½•ã‹ã„ã„æ–¹æ³•ã¯ã‚ã‚Šãã†ã€‚
- ãƒ¬ãƒã‚¸ãƒˆãƒªæ•°ãŒå¢—ãˆã‚‹ã¨`const branch`ã€`const total`ã¯foræ–‡ã‚’ä½¿ã†æ–¹ãŒãƒ™ã‚¿ãƒ¼ã€‚
